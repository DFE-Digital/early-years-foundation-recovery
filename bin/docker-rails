#!/bin/sh
#
# Run `rails` commands in the development environment.
# Starts a container unless one is actively running.
# ------------------------------------------------------------------------------
set -e

if docker container ls -q -f name=recovery_dev; then
  docker exec -it recovery_dev rails "$@"
else
  docker-compose \
    -f docker-compose.yml \
    -f docker-compose.dev.yml \
    --project-name recovery \
    run \
    --name recovery_rails \
    --rm app \
    rails "$@"
fi
